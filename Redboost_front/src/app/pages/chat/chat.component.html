<!-- chat.component.html -->
<div class="chat-container">
  <div class="chat-messages">
    <div *ngFor="let message of messages; let i = index"
         class="message"
         [class.sent]="message.sent"
         [class.received]="!message.sent">
      <!-- Profile Picture for Received Messages -->
      <img *ngIf="!message.sent" class="profile-picture received" [src]="message.senderAvatar" alt="Sender Avatar" />
      <!-- Message Options for Sent Messages -->
      <div class="message-options" *ngIf="message.sent">
        <button class="options-button" (click)="toggleMessageOptions(i); $event.stopPropagation()">⋮</button>
        <div class="options-dropdown" *ngIf="message.showOptions">
          <button (click)="editMessage(i)">Modifier le message</button>
          <button (click)="deleteMessage(i)">Supprimer le message</button>
        </div>
      </div>
      <!-- Message Content -->
      <div class="message-content">
        <p>{{ message.text }}</p>
        <span class="message-time">{{ message.time }}</span>
      </div>
      <!-- Profile Picture for Sent Messages -->
      <img *ngIf="message.sent" class="profile-picture sent" [src]="message.senderAvatar" alt="Sender Avatar" />
    </div>
  </div>
  <div class="message-input">
    <input type="text"
           [(ngModel)]="newMessage"
           placeholder="Écrivez un message..."
           (keyup.enter)="isEditing ? updateMessage() : sendMessage()"
           [disabled]="isLoading">
    <button class="send-button" (click)="sendMessage()" title="Envoyer" *ngIf="!isEditing" [disabled]="isLoading">➤</button>
    <button class="update-button" (click)="updateMessage()" title="Mettre à jour" *ngIf="isEditing" [disabled]="isLoading">✓</button>
    <button class="cancel-button" (click)="cancelEditing()" title="Annuler" *ngIf="isEditing" [disabled]="isLoading">✗</button>
  </div>
</div>